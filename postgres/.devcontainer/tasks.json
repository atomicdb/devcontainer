{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    // See PostgreSQL meson doc link https://wiki.postgresql.org/wiki/Meson
    "version": "2.0.0",
    "tasks": [
        {
            "label": "meson setup",
            "type": "shell",
            "command": "meson",
            "args": [
                "setup",
                "../build",         // out of source tree
                "--buildtype=debug",
                "-Dcassert=true",
                "--werror"
            ],
            "problemMatcher": [],
            "detail": "meson setup debug configuration"
        },
        {
            "label": "ninja build",
            "type": "shell",
            "command": "ninja",
            "args":[
                "-C",
                "../build",
                "-j",
                "4"
            ],
            "problemMatcher": [],
            "detail": "build postgres"
        },
        {
            "label": "regression tests",
            "type": "shell",
            "command": "meson test -C ../build -q --print-errorlogs --suite setup --suite regress",
            "problemMatcher": [],
            "detail": "run main regression tests"
        },
        {
            "label": "check-world",
            "type": "shell",
            "command": "meson test -C ../build -q --print-errorlogs",
            "problemMatcher": [],
            "detail": "run all tests"
        },
        {
            "label": "ninja install",
            "type": "shell",
            "command": "sudo ninja install -C ../build",
            "problemMatcher": [],
            "detail": "install pgsql"
        },
        {
            "label": "init cluster",
            "type": "shell",
            "command": "initdb",
            "args": [
                "-D",
                "/home/postgres/pgdata"
            ],
            "problemMatcher": [],
            "detail": "init cluster using initdb"
        },
        {
            "label": "start cluster",
            "type": "shell",
            "command": "pg_ctl",
            "args": [
                "-D",
                "/home/postgres/pgdata",
                "-l",
                "/home/postgres/pgdata/logfile",
                "start"
            ],
            "problemMatcher": [],
            "detail": "start db cluster"
        },
        {
            "label": "restart cluster",
            "type": "shell",
            "command": "pg_ctl",
            "args": [
                "-D",
                "/home/postgres/pgdata",
                "-l",
                "/home/postgres/pgdata/logfile",
                "restart"
            ],
            "problemMatcher": [],
            "detail": "restart db cluster"
        },
        {
            "label": "stop cluster",
            "type": "shell",
            "command": "pg_ctl",
            "args": [
                "-D",
                "/home/postgres/pgdata",
                "stop"
            ],
            "problemMatcher": [],
            "detail": "stop db cluster"
        }
    ]
}
